<div *ngIf="error" class="container">
    <mat-card class="loading" appearance="outlined" color="red">
        <mat-card-content>
            <h1 style="color: red;">Doslo je do greske!</h1>
        </mat-card-content>
    </mat-card>
</div>

<app-loading *ngIf="!movie && !error" />

<div class="wrapper" *ngIf="movie">
    <h1>{{movie.title}}</h1>
    <div class="movie-content">
        <img [src]="movie.poster" [alt]="movie.title">
        <mat-card class="movie-card" appearance="outlined">
            <mat-card-content>
                <h2>Movie Details</h2>
                <mat-list role="list">
                    <mat-list-item>
                        <span matListItemTitle class="bold-text">Žanr:</span>
                        <span *ngFor="let genre of movie?.movieGenres; let i = index">
                            {{ genre?.genre?.name }}<span *ngIf="i < (movie?.movieGenres?.length || 0) - 1">, </span>
                        </span>
                    </mat-list-item>
                    
                    <mat-list-item>
                        <span matListItemTitle><strong>Glumci:</strong></span>      
                        <span *ngFor="let actor of movie?.movieActors; let i = index">
                             {{ actor?.actor?.name }}<span *ngIf="i < (movie?.movieActors?.length || 0) - 1">, </span>
                        </span>
                    </mat-list-item>
                    
                    <mat-list-item>
                        <span matListItemTitle><strong>Trajanje :</strong></span>
                        <span matListItemLine>{{movie.runTime}}min</span>
                    </mat-list-item>
                    
                    <mat-list-item>
                        <span matListItemTitle><strong>Početak prikazivanja :</strong></span>
                        <span matListItemLine>{{movie.startDate}}</span>
                    </mat-list-item>
                    
                    <mat-list-item>
                        <span matListItemTitle><strong>Režiser :</strong></span>
                        <span matListItemLine>{{movie?.director?.name}}</span>
                    </mat-list-item> 

                    <mat-list-item>
                        <span matListItemTitle><strong>Kratak opis :</strong></span>
                        <span matListItemLine class="opis">{{movie.description}}</span>
                    </mat-list-item>
                </mat-list>
            </mat-card-content>
            
            <mat-card-actions>
                <a mat-button (click)="bookTicket()">
                    <i class="fa-solid fa-cart-shopping"></i> Book Now
                </a>
            </mat-card-actions>
        </mat-card>
    </div>
</div>
